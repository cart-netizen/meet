# MeetUp.local ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–∏–∫—Ä–æ-–≤—Å—Ç—Ä–µ—á –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Expo Dev Server
npm start

# –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
npm run android    # Android —ç–º—É–ª—è—Ç–æ—Ä/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
npm run ios        # iOS —Å–∏–º—É–ª—è—Ç–æ—Ä (—Ç–æ–ª—å–∫–æ –Ω–∞ macOS)
npm run web        # –í–µ–±-–≤–µ—Ä—Å–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ü–æ—Å–ª–µ npm start:

–û—Ç–∫—Ä–æ–µ—Ç—Å—è Expo DevTools –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
–ù–∞–∂–º–∏—Ç–µ a –¥–ª—è Android, i –¥–ª—è iOS, w –¥–ª—è –≤–µ–±
–ò–ª–∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Expo Go –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

–î–ª—è Android: Android Studio —Å —ç–º—É–ª—è—Ç–æ—Ä–æ–º –∏–ª–∏ Expo Go –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
–î–ª—è iOS: Xcode (—Ç–æ–ª—å–∫–æ macOS) –∏–ª–∏ Expo Go –Ω–∞ iPhone
–î–ª—è –≤–µ–±: –ø—Ä–æ—Å—Ç–æ –±—Ä–∞—É–∑–µ—Ä
–ï—Å–ª–∏ –Ω–∞ Windows —Å Android:

npm run android

Android SDK –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ï—Å—Ç—å 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞:

–í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ–±-–≤–µ—Ä—Å–∏—é (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)
npm run web

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ - —É–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ UI.

–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Expo Go –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
npm start

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Expo Go –∏–∑ Google Play –Ω–∞ Android-—Ç–µ–ª–µ—Ñ–æ–Ω
–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
–í–∞—Ä–∏–∞–Ω—Ç 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Android Studio
–°–∫–∞—á–∞–π—Ç–µ Android Studio
–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—ã–±–µ—Ä–∏—Ç–µ "Android SDK"
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã:
# –í PowerShell (–æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):
[Environment]::SetEnvironmentVariable("ANDROID_HOME", "$env:LOCALAPPDATA\Android\Sdk", "User")
[Environment]::SetEnvironmentVariable("Path", "$env:Path;$env:LOCALAPPDATA\Android\Sdk\platform-tools", "User")

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª
–°–æ–∑–¥–∞–π—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä –≤ Android Studio ‚Üí Device Manager
–ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm run android
–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å npm run web - —ç—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.



## –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MVP

---

## 1. –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### 1.1 –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**MeetUp.local** (–∏–ª–∏ –°–≤–æ–∏–õ—é–¥–∏) ‚Äî –º–æ–±–∏–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º –≤ –†–æ—Å—Å–∏–∏. –ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–∞–∫ –º–µ—Ö–∞–Ω–∏–∑–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ—Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 1.2 –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ–º

- Meetup.com –Ω–µ–∞–∫—Ç—É–∞–ª–µ–Ω –≤ –†–æ—Å—Å–∏–∏
- Telegram-—á–∞—Ç—ã —Ö–∞–æ—Ç–∏—á–Ω—ã, —Å–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏
- –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –ª—é–¥–∏ –ø—Ä–∏–¥—É—Ç (no-show problem)
- –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –¥–ª—è –æ—Ñ–ª–∞–π–Ω-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

### 1.3 –¢–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

- –ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã (–ú–∞—Ñ–∏—è, –ú–æ–Ω–æ–ø–æ–ª–∏—è, –ö–∞—Ä–∫–∞—Å—Å–æ–Ω)
- –°–ø–æ—Ä—Ç (—Ñ—É—Ç–±–æ–ª, –≤–æ–ª–µ–π–±–æ–ª, —Ä–æ–ª–∏–∫–∏, –≤–µ–ª–æ—Å–∏–ø–µ–¥)
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏–≥—Ä—ã (–º–∞—Ñ–∏—è, –∫–≤–∏–∑—ã)
- –ü—Ä–æ–≥—É–ª–∫–∏ –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏
- –Ø–∑—ã–∫–æ–≤—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- –•–æ–±–±–∏-–≤—Å—Ç—Ä–µ—á–∏

### 1.4 –ú–æ–¥–µ–ª—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –¢–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –°—Ç–æ–∏–º–æ—Å—Ç—å | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ |
|------------------|-----------|-------------|
| –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä | 499‚ÇΩ/–º–µ—Å | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á, –º–æ–¥–µ—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| –£—á–∞—Å—Ç–Ω–∏–∫ | 199‚ÇΩ/–º–µ—Å | –ó–∞–ø–∏—Å—å –Ω–∞ –ª—é–±—ã–µ –≤—Å—Ç—Ä–µ—á–∏, —á–∞—Ç, –æ—Ç–∑—ã–≤—ã |
| –†–∞–∑–æ–≤–æ–µ —É—á–∞—Å—Ç–∏–µ | 99‚ÇΩ –∑–∞ –≤—Å—Ç—Ä–µ—á—É | –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏, –æ–ø–ª–∞—Ç–∞ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤—Å—Ç—Ä–µ—á—É |

---

## 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|------------|
| Mobile | React Native + Expo | –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ |
| Backend | Supabase (PostgreSQL + PostGIS + Auth + Realtime + Edge Functions) | BaaS —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π |
| UI | NativeWind + React Native Paper | –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| Maps | Yandex Maps SDK | –ö–∞—Ä—Ç—ã –¥–ª—è –†–æ—Å—Å–∏–∏ |
| Push | expo-notifications + Supabase webhooks | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| Chat | Supabase Realtime | Real-time messaging |
| Payments | YooKassa | –†–æ—Å—Å–∏–π—Å–∫–∏–µ –ø–ª–∞—Ç–µ–∂–∏ |
| State | Zustand | State management |
| Forms | React Hook Form + Zod | –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º |

---

## 3. –ü—Ä–æ–º—Ç –¥–ª—è Claude Code

```markdown
# –ü—Ä–æ–µ–∫—Ç: MeetUp.local - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–∏–∫—Ä–æ-–≤—Å—Ç—Ä–µ—á

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º –≤ –†–æ—Å—Å–∏–∏. –ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–∞–∫ –º–µ—Ö–∞–Ω–∏–∑–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ—Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ–º
- Meetup.com –Ω–µ–∞–∫—Ç—É–∞–ª–µ–Ω –≤ –†–æ—Å—Å–∏–∏
- Telegram-—á–∞—Ç—ã —Ö–∞–æ—Ç–∏—á–Ω—ã, —Å–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏
- –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –ª—é–¥–∏ –ø—Ä–∏–¥—É—Ç (no-show problem)
- –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –¥–ª—è –æ—Ñ–ª–∞–π–Ω-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Mobile:** React Native + Expo
- **Backend:** Supabase (PostgreSQL + PostGIS + Auth + Realtime + Edge Functions)
- **UI:** NativeWind + React Native Paper
- **Maps:** Yandex Maps SDK (React Native binding)
- **Push:** expo-notifications + Supabase webhooks
- **Chat:** Supabase Realtime
- **Payments:** YooKassa
- **State:** Zustand
- **Forms:** React Hook Form + Zod

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
CREATE EXTENSION IF NOT EXISTS postgis;

-- –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  display_name TEXT NOT NULL,
  avatar_url TEXT,
  bio TEXT,
  birth_year INTEGER,
  city TEXT NOT NULL,
  location GEOGRAPHY(POINT, 4326),
  interests TEXT[],
  subscription_type TEXT CHECK (subscription_type IN ('free', 'participant', 'organizer')),
  subscription_expires_at TIMESTAMPTZ,
  rating DECIMAL(3,2) DEFAULT 5.0,
  reviews_count INTEGER DEFAULT 0,
  events_organized INTEGER DEFAULT 0,
  events_attended INTEGER DEFAULT 0,
  no_show_count INTEGER DEFAULT 0,
  is_verified BOOLEAN DEFAULT false,
  last_active_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
CREATE TABLE activity_categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  icon TEXT,
  color TEXT,
  parent_id UUID REFERENCES activity_categories(id),
  is_active BOOLEAN DEFAULT true
);

-- –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è/–≤—Å—Ç—Ä–µ—á–∏
CREATE TABLE events (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  organizer_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  -- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  title TEXT NOT NULL,
  description TEXT,
  category_id UUID REFERENCES activity_categories(id),
  tags TEXT[],
  
  -- –í—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ
  starts_at TIMESTAMPTZ NOT NULL,
  ends_at TIMESTAMPTZ,
  duration_minutes INTEGER,
  timezone TEXT DEFAULT 'Europe/Moscow',
  
  -- –õ–æ–∫–∞—Ü–∏—è
  location GEOGRAPHY(POINT, 4326),
  address TEXT NOT NULL,
  place_name TEXT,
  place_details TEXT,
  city TEXT NOT NULL,
  
  -- –£—á–∞—Å—Ç–Ω–∏–∫–∏
  min_participants INTEGER DEFAULT 2,
  max_participants INTEGER,
  current_participants INTEGER DEFAULT 0,
  
  -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  is_public BOOLEAN DEFAULT true,
  requires_approval BOOLEAN DEFAULT false,
  allow_chat BOOLEAN DEFAULT true,
  
  -- –°—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è
  entry_fee DECIMAL(10,2) DEFAULT 0,
  
  -- –°—Ç–∞—Ç—É—Å
  status TEXT DEFAULT 'draft' CHECK (status IN ('draft', 'published', 'cancelled', 'completed')),
  cancelled_reason TEXT,
  
  -- –ú–µ—Ç—Ä–∏–∫–∏
  views_count INTEGER DEFAULT 0,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –≥–µ–æ–ø–æ–∏—Å–∫–∞
CREATE INDEX events_location_idx ON events USING GIST (location);
CREATE INDEX events_starts_at_idx ON events (starts_at);
CREATE INDEX events_city_idx ON events (city);

-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
CREATE TABLE event_participants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'declined', 'cancelled', 'attended', 'no_show')),
  
  -- –û–ø–ª–∞—Ç–∞ —Ä–∞–∑–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–∏—è
  payment_id TEXT,
  payment_status TEXT CHECK (payment_status IN ('pending', 'paid', 'refunded')),
  
  message_to_organizer TEXT,
  
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  approved_at TIMESTAMPTZ,
  cancelled_at TIMESTAMPTZ,
  
  UNIQUE(event_id, user_id)
);

-- –û—Ç–∑—ã–≤—ã
CREATE TABLE reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  reviewer_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  reviewee_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  rating INTEGER CHECK (rating >= 1 AND rating <= 5),
  comment TEXT,
  
  review_type TEXT CHECK (review_type IN ('organizer_to_participant', 'participant_to_organizer')),
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(event_id, reviewer_id, reviewee_id)
);

-- –ß–∞—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
CREATE TABLE event_messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  content TEXT NOT NULL,
  
  is_system BOOLEAN DEFAULT false,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ü–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CREATE TABLE app_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  type TEXT NOT NULL CHECK (type IN ('participant', 'organizer')),
  
  starts_at TIMESTAMPTZ NOT NULL,
  expires_at TIMESTAMPTZ NOT NULL,
  
  payment_id TEXT,
  amount DECIMAL(10,2),
  
  is_active BOOLEAN DEFAULT true,
  auto_renew BOOLEAN DEFAULT true,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –†–∞–∑–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∑–∞ —É—á–∞—Å—Ç–∏–µ
CREATE TABLE event_payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  amount DECIMAL(10,2) NOT NULL,
  
  yookassa_payment_id TEXT,
  status TEXT CHECK (status IN ('pending', 'succeeded', 'cancelled', 'refunded')),
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
CREATE TABLE saved_events (
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (user_id, event_id)
);

-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
CREATE TABLE notifications (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  
  type TEXT NOT NULL,
  title TEXT NOT NULL,
  body TEXT,
  
  data JSONB,
  
  is_read BOOLEAN DEFAULT false,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –¢–∞—Ä–∏—Ñ—ã –ø–æ–¥–ø–∏—Å–æ–∫:
- **–£—á–∞—Å—Ç–Ω–∏–∫ (199‚ÇΩ/–º–µ—Å):** –∑–∞–ø–∏—Å—å –Ω–∞ –ª—é–±—ã–µ –≤—Å—Ç—Ä–µ—á–∏, —á–∞—Ç, –æ—Ç–∑—ã–≤—ã
- **–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä (499‚ÇΩ/–º–µ—Å):** –≤—Å—ë –∏–∑ "–£—á–∞—Å—Ç–Ω–∏–∫" + —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á –±–µ–∑ –ª–∏–º–∏—Ç–∞
- **–†–∞–∑–æ–≤–æ–µ —É—á–∞—Å—Ç–∏–µ (99‚ÇΩ):** –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏, –æ–ø–ª–∞—Ç–∞ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤—Å—Ç—Ä–µ—á—É

### –ü—Ä–∞–≤–∏–ª–∞ no-show:
- –ü–µ—Ä–≤—ã–π no-show: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –í—Ç–æ—Ä–æ–π no-show: –≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–∞–Ω –Ω–∞ 7 –¥–Ω–µ–π
- –¢—Ä–µ—Ç–∏–π no-show: –±–∞–Ω –Ω–∞ 30 –¥–Ω–µ–π
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –æ—Ç–º–µ—á–∞–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞

### –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:
- –ü–æ—Å–ª–µ –≤—Å—Ç—Ä–µ—á–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ (1-5)
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –†–µ–π—Ç–∏–Ω–≥ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç—å –≤ –ø–æ–∏—Å–∫–µ

## –û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã

### 1. Discovery (–≥–ª–∞–≤–Ω—ã–π)
- –ö–∞—Ä—Ç–∞ —Å –º–µ—Ç–∫–∞–º–∏ –≤—Å—Ç—Ä–µ—á –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
- –°–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–µ—á —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, –¥–∞—Ç–∞, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ)
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/—Ç–µ–≥–∞–º

### 2. Event Details
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å—Ç—Ä–µ—á–µ
- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (—Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏)
- –ß–∞—Ç –≤—Å—Ç—Ä–µ—á–∏
- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏ / –æ—Ç–º–µ–Ω—ã

### 3. Create Event
- Wizard —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å—Ç—Ä–µ—á–∏
- –í—ã–±–æ—Ä –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

### 4. My Events
- –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–Ω–æ–π
- –£—á–∞—Å—Ç–≤—É—é
- –ò—Å—Ç–æ—Ä–∏—è

### 5. Profile
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–±–µ
- –ò–Ω—Ç–µ—Ä–µ—Å—ã
- –û—Ç–∑—ã–≤—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### 6. Chat
- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ –≤—Å—Ç—Ä–µ—á–∞–º
- Real-time messaging

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
meetup-local/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ onboarding/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ interests.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ location.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ subscription.tsx
‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ my-events.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chats.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile.tsx
‚îÇ   ‚îú‚îÄ‚îÄ event/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [id].tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ edit/[id].tsx
‚îÇ   ‚îú‚îÄ‚îÄ user/[id].tsx
‚îÇ   ‚îú‚îÄ‚îÄ subscription.tsx
‚îÇ   ‚îî‚îÄ‚îÄ _layout.tsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ events/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventCard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventMap.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ParticipantsList.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EventChat.tsx
‚îÇ   ‚îú‚îÄ‚îÄ discovery/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MapView.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FilterSheet.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SearchBar.tsx
‚îÇ   ‚îî‚îÄ‚îÄ common/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îú‚îÄ‚îÄ location/
‚îÇ   ‚îú‚îÄ‚îÄ payments/
‚îÇ   ‚îî‚îÄ‚îÄ notifications/
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ events.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts
‚îÇ   ‚îú‚îÄ‚îÄ location.ts
‚îÇ   ‚îî‚îÄ‚îÄ chat.ts
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useLocation.ts
‚îÇ   ‚îú‚îÄ‚îÄ useSubscription.ts
‚îÇ   ‚îî‚îÄ‚îÄ useEventChat.ts
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ geo.ts
‚îÇ   ‚îî‚îÄ‚îÄ date.ts
‚îú‚îÄ‚îÄ constants/
‚îÇ   ‚îú‚îÄ‚îÄ categories.ts
‚îÇ   ‚îî‚îÄ‚îÄ cities.ts
‚îî‚îÄ‚îÄ types/
```

## API —Ñ—É–Ω–∫—Ü–∏–∏ (Supabase Edge Functions)

### search-events
–ü–æ–∏—Å–∫ –≤—Å—Ç—Ä–µ—á —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π.

### join-event
–ó–∞–ø–∏—Å—å –Ω–∞ –≤—Å—Ç—Ä–µ—á—É —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ–ø–ª–∞—Ç–æ–π.

### mark-attendance
–û—Ç–º–µ—Ç–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º.

### process-no-shows
Cron job –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ no-shows –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å—Ç—Ä–µ—á–∏.

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Phase 1 (MVP - 4 –Ω–µ–¥–µ–ª–∏):
1. Auth + onboarding (–∏–Ω—Ç–µ—Ä–µ—Å—ã, –≥–æ—Ä–æ–¥)
2. –ë–∞–∑–æ–≤—ã–π discovery (—Å–ø–∏—Å–æ–∫, –±–µ–∑ –∫–∞—Ä—Ç—ã)
3. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏ (–ø—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞)
4. –ó–∞–ø–∏—Å—å –Ω–∞ –≤—Å—Ç—Ä–µ—á—É (–±–µ–∑ –æ–ø–ª–∞—Ç—ã)
5. –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å

### Phase 2 (Core - 3 –Ω–µ–¥–µ–ª–∏):
1. –ö–∞—Ä—Ç–∞ —Å Yandex Maps
2. –ì–µ–æ–ø–æ–∏—Å–∫ –≤—Å—Ç—Ä–µ—á
3. –ß–∞—Ç –≤—Å—Ç—Ä–µ—á–∏ (Supabase Realtime)
4. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### Phase 3 (Monetization - 2 –Ω–µ–¥–µ–ª–∏):
1. YooKassa –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
2. –ü–æ–¥–ø–∏—Å–∫–∏ (—É—á–∞—Å—Ç–Ω–∏–∫/–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä)
3. –†–∞–∑–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞ —É—á–∞—Å—Ç–∏—è
4. Paywall

### Phase 4 (Trust & Safety - 2 –Ω–µ–¥–µ–ª–∏):
1. –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è
2. No-show —Å–∏—Å—Ç–µ–º–∞
3. –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã
4. –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### Phase 5 (Polish - 1 –Ω–µ–¥–µ–ª—è):
1. Animations
2. Offline support
3. Deep links
4. App store assets

## –ù–∞—á–Ω–∏ —Å Phase 1, —Å–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç –∏ –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
```

---

## 4. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –Ω–µ–¥–µ–ª—è–º

### –ù–µ–¥–µ–ª—è 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ Auth

#### –î–µ–Ω—å 1-2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npx create-expo-app meetup-local -t expo-template-blank-typescript
cd meetup-local

# Core dependencies
npx expo install expo-router expo-location expo-notifications
npm install @supabase/supabase-js zustand nativewind
npm install react-hook-form @hookform/resolvers zod
npm install date-fns

# UI
npm install react-native-paper react-native-safe-area-context
npx expo install react-native-reanimated react-native-gesture-handler

# Maps (Yandex)
npm install react-native-yamap
```

#### –î–µ–Ω—å 3-4: Supabase + –º–∏–≥—Ä–∞—Ü–∏–∏

```sql
-- –í–∫–ª—é—á–∞–µ–º PostGIS
CREATE EXTENSION IF NOT EXISTS postgis;

-- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ —Å—Ö–µ–º—ã –≤—ã—à–µ
-- ...

-- RLS Policies
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view any profile"
  ON profiles FOR SELECT
  USING (true);

CREATE POLICY "Users can update own profile"
  ON profiles FOR UPDATE
  USING (auth.uid() = id);

-- Events policies
ALTER TABLE events ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Anyone can view published events"
  ON events FOR SELECT
  USING (status = 'published' OR organizer_id = auth.uid());

CREATE POLICY "Organizers can manage own events"
  ON events FOR ALL
  USING (organizer_id = auth.uid());
```

#### –î–µ–Ω—å 5-7: Auth flow

```typescript
// app/(auth)/register.tsx
import { useForm, Controller } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const registerSchema = z.object({
  email: z.string().email('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email'),
  password: z.string().min(8, '–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤'),
  displayName: z.string().min(2, '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞'),
  city: z.string().min(1, '–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥')
});

export default function RegisterScreen() {
  const { control, handleSubmit, formState: { errors } } = useForm({
    resolver: zodResolver(registerSchema)
  });
  
  const onSubmit = async (data) => {
    const { error } = await supabase.auth.signUp({
      email: data.email,
      password: data.password,
      options: {
        data: {
          display_name: data.displayName,
          city: data.city
        }
      }
    });
    
    if (!error) {
      router.push('/onboarding/interests');
    }
  };
  
  return (
    <View className="flex-1 p-4">
      <Text className="text-2xl font-bold mb-6">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</Text>
      
      <Controller
        control={control}
        name="email"
        render={({ field: { onChange, value } }) => (
          <TextInput
            label="Email"
            value={value}
            onChangeText={onChange}
            error={!!errors.email}
          />
        )}
      />
      {/* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è */}
    </View>
  );
}
```

---

### –ù–µ–¥–µ–ª—è 2: Onboarding –∏ Discovery

#### –î–µ–Ω—å 1-2: –í—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤

```typescript
// constants/categories.ts
export const ACTIVITY_CATEGORIES = [
  {
    id: 'board-games',
    name: '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã',
    icon: 'üé≤',
    color: '#8B5CF6',
    subcategories: ['–ú–∞—Ñ–∏—è', '–ú–æ–Ω–æ–ø–æ–ª–∏—è', '–ö–∞—Ä–∫–∞—Å—Å–æ–Ω', '–ö–æ–¥–æ–≤—ã–µ –∏–º–µ–Ω–∞']
  },
  {
    id: 'sports',
    name: '–°–ø–æ—Ä—Ç',
    icon: '‚öΩ',
    color: '#10B981',
    subcategories: ['–§—É—Ç–±–æ–ª', '–í–æ–ª–µ–π–±–æ–ª', '–ë–∞—Å–∫–µ—Ç–±–æ–ª', '–¢–µ–Ω–Ω–∏—Å', '–ë–∞–¥–º–∏–Ω—Ç–æ–Ω']
  },
  {
    id: 'outdoor',
    name: '–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö',
    icon: 'üö¥',
    color: '#F59E0B',
    subcategories: ['–†–æ–ª–∏–∫–∏', '–í–µ–ª–æ—Å–∏–ø–µ–¥', '–ü–æ—Ö–æ–¥—ã', '–ë–µ–≥']
  },
  {
    id: 'intellectual',
    name: '–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ',
    icon: 'üß†',
    color: '#3B82F6',
    subcategories: ['–ö–≤–∏–∑—ã', '–î–µ–±–∞—Ç—ã', '–®–∞—Ö–º–∞—Ç—ã']
  },
  {
    id: 'languages',
    name: '–Ø–∑—ã–∫–æ–≤—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏',
    icon: 'üåç',
    color: '#EC4899',
    subcategories: ['–ê–Ω–≥–ª–∏–π—Å–∫–∏–π', '–ù–µ–º–µ—Ü–∫–∏–π', '–ò—Å–ø–∞–Ω—Å–∫–∏–π', '–ö–∏—Ç–∞–π—Å–∫–∏–π']
  },
  {
    id: 'creative',
    name: '–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ',
    icon: 'üé®',
    color: '#EF4444',
    subcategories: ['–†–∏—Å–æ–≤–∞–Ω–∏–µ', '–ú—É–∑—ã–∫–∞', '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è']
  },
  {
    id: 'walks',
    name: '–ü—Ä–æ–≥—É–ª–∫–∏',
    icon: 'üö∂',
    color: '#6366F1',
    subcategories: ['–≠–∫—Å–∫—É—Ä—Å–∏–∏', '–§–æ—Ç–æ–ø—Ä–æ–≥—É–ª–∫–∏', '–ì–æ—Ä–æ–¥—Å–∫–∏–µ –∫–≤–µ—Å—Ç—ã']
  }
];

// app/(auth)/onboarding/interests.tsx
export default function InterestsScreen() {
  const [selected, setSelected] = useState<string[]>([]);
  
  const toggleInterest = (id: string) => {
    setSelected(prev => 
      prev.includes(id) 
        ? prev.filter(i => i !== id)
        : [...prev, id]
    );
  };
  
  const handleContinue = async () => {
    await supabase
      .from('profiles')
      .update({ interests: selected })
      .eq('id', user.id);
    
    router.push('/onboarding/subscription');
  };
  
  return (
    <View className="flex-1 p-4">
      <Text className="text-2xl font-bold mb-2">–ß—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ?</Text>
      <Text className="text-gray-500 mb-6">–í—ã–±–µ—Ä–∏ –º–∏–Ω–∏–º—É–º 3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</Text>
      
      <ScrollView>
        <View className="flex-row flex-wrap gap-2">
          {ACTIVITY_CATEGORIES.map(cat => (
            <Pressable
              key={cat.id}
              onPress={() => toggleInterest(cat.id)}
              className={`px-4 py-3 rounded-full border ${
                selected.includes(cat.id) 
                  ? 'bg-primary border-primary' 
                  : 'border-gray-300'
              }`}
            >
              <Text>{cat.icon} {cat.name}</Text>
            </Pressable>
          ))}
        </View>
      </ScrollView>
      
      <Button 
        disabled={selected.length < 3}
        onPress={handleContinue}
      >
        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
      </Button>
    </View>
  );
}
```

#### –î–µ–Ω—å 3-5: Discovery —Å–ø–∏—Å–æ–∫

```typescript
// stores/events.ts
interface EventsStore {
  events: Event[];
  filters: EventFilters;
  isLoading: boolean;
  
  fetchEvents: () => Promise<void>;
  setFilters: (filters: Partial<EventFilters>) => void;
}

export const useEventsStore = create<EventsStore>((set, get) => ({
  events: [],
  filters: {
    category: null,
    dateFrom: new Date(),
    dateTo: addDays(new Date(), 30),
    maxDistance: 10, // km
  },
  isLoading: false,
  
  fetchEvents: async () => {
    set({ isLoading: true });
    
    const { filters } = get();
    const { data: location } = await Location.getCurrentPositionAsync();
    
    // –í—ã–∑—ã–≤–∞–µ–º Edge Function –¥–ª—è –≥–µ–æ–ø–æ–∏—Å–∫–∞
    const { data, error } = await supabase.functions.invoke('search-events', {
      body: {
        latitude: location.coords.latitude,
        longitude: location.coords.longitude,
        maxDistance: filters.maxDistance * 1000, // –≤ –º–µ—Ç—Ä–∞—Ö
        category: filters.category,
        dateFrom: filters.dateFrom.toISOString(),
        dateTo: filters.dateTo.toISOString()
      }
    });
    
    set({ events: data || [], isLoading: false });
  }
}));

// supabase/functions/search-events/index.ts
Deno.serve(async (req) => {
  const { latitude, longitude, maxDistance, category, dateFrom, dateTo } = await req.json();
  
  const supabase = createClient(/* ... */);
  
  let query = supabase
    .from('events')
    .select(`
      *,
      organizer:profiles!organizer_id(id, display_name, avatar_url, rating),
      category:activity_categories(*),
      participants:event_participants(count)
    `)
    .eq('status', 'published')
    .gte('starts_at', dateFrom)
    .lte('starts_at', dateTo);
  
  if (category) {
    query = query.eq('category_id', category);
  }
  
  // –ì–µ–æ—Ñ–∏–ª—å—Ç—Ä —á–µ—Ä–µ–∑ PostGIS
  const { data } = await query.rpc('events_within_distance', {
    lat: latitude,
    lon: longitude,
    distance_meters: maxDistance
  });
  
  return new Response(JSON.stringify(data));
});

// SQL function –¥–ª—è –≥–µ–æ–ø–æ–∏—Å–∫–∞
CREATE OR REPLACE FUNCTION events_within_distance(
  lat FLOAT,
  lon FLOAT,
  distance_meters FLOAT
)
RETURNS SETOF events AS $$
  SELECT *
  FROM events
  WHERE ST_DWithin(
    location,
    ST_SetSRID(ST_MakePoint(lon, lat), 4326)::geography,
    distance_meters
  )
  AND status = 'published'
  ORDER BY location <-> ST_SetSRID(ST_MakePoint(lon, lat), 4326)::geography;
$$ LANGUAGE sql;
```

#### –î–µ–Ω—å 6-7: Event Card –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
// components/events/EventCard.tsx
interface EventCardProps {
  event: Event;
  distance?: number;
}

export function EventCard({ event, distance }: EventCardProps) {
  const spotsLeft = event.max_participants 
    ? event.max_participants - event.current_participants
    : null;
  
  return (
    <Pressable 
      onPress={() => router.push(`/event/${event.id}`)}
      className="bg-white rounded-xl p-4 mb-3 shadow-sm"
    >
      {/* –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏ –≤—Ä–µ–º—è */}
      <View className="flex-row items-center mb-2">
        <View 
          className="px-2 py-1 rounded-full mr-2"
          style={{ backgroundColor: event.category.color + '20' }}
        >
          <Text style={{ color: event.category.color }}>
            {event.category.icon} {event.category.name}
          </Text>
        </View>
        <Text className="text-gray-500">
          {format(new Date(event.starts_at), 'd MMM, HH:mm', { locale: ru })}
        </Text>
      </View>
      
      {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
      <Text className="text-lg font-semibold mb-1">{event.title}</Text>
      
      {/* –ú–µ—Å—Ç–æ */}
      <View className="flex-row items-center mb-2">
        <MapPin size={16} className="text-gray-400 mr-1" />
        <Text className="text-gray-600 flex-1" numberOfLines={1}>
          {event.place_name || event.address}
        </Text>
        {distance && (
          <Text className="text-gray-400 ml-2">
            {distance < 1 ? `${Math.round(distance * 1000)} –º` : `${distance.toFixed(1)} –∫–º`}
          </Text>
        )}
      </View>
      
      {/* –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ */}
      <View className="flex-row items-center justify-between">
        <View className="flex-row items-center">
          <Avatar size={24} source={{ uri: event.organizer.avatar_url }} />
          <Text className="ml-2 text-gray-600">{event.organizer.display_name}</Text>
          <View className="flex-row items-center ml-2">
            <Star size={14} className="text-yellow-500" />
            <Text className="text-gray-600 ml-1">{event.organizer.rating.toFixed(1)}</Text>
          </View>
        </View>
        
        <View className="flex-row items-center">
          <Users size={16} className="text-gray-400 mr-1" />
          <Text className="text-gray-600">
            {event.current_participants}
            {event.max_participants && `/${event.max_participants}`}
          </Text>
          {spotsLeft !== null && spotsLeft <= 3 && spotsLeft > 0 && (
            <Text className="text-orange-500 ml-1">
              (–æ—Å—Ç–∞–ª–æ—Å—å {spotsLeft})
            </Text>
          )}
        </View>
      </View>
    </Pressable>
  );
}
```

---

### –ù–µ–¥–µ–ª—è 3: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏ –∏ –¥–µ—Ç–∞–ª–∏

#### –î–µ–Ω—å 1-3: –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å—Ç—Ä–µ—á–∏

```typescript
// app/event/create.tsx
const createEventSchema = z.object({
  title: z.string().min(5, '–ú–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤').max(100),
  description: z.string().max(1000).optional(),
  categoryId: z.string().uuid(),
  startsAt: z.date().min(new Date(), '–î–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º'),
  durationMinutes: z.number().min(30).max(480),
  address: z.string().min(5),
  placeName: z.string().optional(),
  placeDetails: z.string().optional(),
  minParticipants: z.number().min(2).default(2),
  maxParticipants: z.number().min(2).max(100).optional(),
  requiresApproval: z.boolean().default(false),
  tags: z.array(z.string()).max(5)
});

export default function CreateEventScreen() {
  const { isPremium, subscriptionType } = useSubscription();
  const [location, setLocation] = useState<LatLng | null>(null);
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
  if (subscriptionType !== 'organizer') {
    return <OrganizerPaywall />;
  }
  
  const { control, handleSubmit, watch } = useForm({
    resolver: zodResolver(createEventSchema),
    defaultValues: {
      minParticipants: 2,
      durationMinutes: 120,
      requiresApproval: false,
      tags: []
    }
  });
  
  const onSubmit = async (data) => {
    const { data: event, error } = await supabase
      .from('events')
      .insert({
        ...data,
        organizer_id: user.id,
        location: `POINT(${location.longitude} ${location.latitude})`,
        city: await reverseGeocode(location),
        status: 'published'
      })
      .select()
      .single();
    
    if (!error) {
      router.replace(`/event/${event.id}`);
    }
  };
  
  return (
    <ScrollView className="flex-1 p-4">
      <Text className="text-2xl font-bold mb-6">–ù–æ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞</Text>
      
      {/* –ö–∞—Ç–µ–≥–æ—Ä–∏—è */}
      <Controller
        control={control}
        name="categoryId"
        render={({ field }) => (
          <CategorySelector
            selected={field.value}
            onSelect={field.onChange}
          />
        )}
      />
      
      {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
      <Controller
        control={control}
        name="title"
        render={({ field, fieldState }) => (
          <TextInput
            label="–ù–∞–∑–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏"
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≥—Ä–∞–µ–º –≤ –ú–∞—Ñ–∏—é –≤ —Ü–µ–Ω—Ç—Ä–µ"
            value={field.value}
            onChangeText={field.onChange}
            error={fieldState.error?.message}
          />
        )}
      />
      
      {/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}
      <Controller
        control={control}
        name="startsAt"
        render={({ field }) => (
          <DateTimePicker
            label="–ö–æ–≥–¥–∞"
            value={field.value}
            onChange={field.onChange}
            minimumDate={new Date()}
          />
        )}
      />
      
      {/* –ö–∞—Ä—Ç–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ—Å—Ç–∞ */}
      <Text className="text-lg font-semibold mt-4 mb-2">–ì–¥–µ</Text>
      <LocationPicker
        value={location}
        onChange={setLocation}
        onAddressChange={(address) => setValue('address', address)}
      />
      
      {/* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è */}
      
      <Button onPress={handleSubmit(onSubmit)} className="mt-6">
        –°–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É
      </Button>
    </ScrollView>
  );
}
```

#### –î–µ–Ω—å 4-5: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Å—Ç—Ä–µ—á–∏

```typescript
// app/event/[id].tsx
export default function EventDetailScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const { user } = useAuth();
  const { subscriptionType } = useSubscription();
  
  const { data: event, isLoading } = useQuery({
    queryKey: ['event', id],
    queryFn: () => fetchEventDetails(id)
  });
  
  const isOrganizer = event?.organizer_id === user?.id;
  const isParticipant = event?.participants?.some(p => p.user_id === user?.id);
  const canJoin = !isOrganizer && !isParticipant && 
    (event?.max_participants ? event.current_participants < event.max_participants : true);
  
  const handleJoin = async () => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
    if (subscriptionType === 'free') {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º paywall —Å –æ–ø—Ü–∏–µ–π —Ä–∞–∑–æ–≤–æ–π –æ–ø–ª–∞—Ç—ã
      router.push(`/event/${id}/pay`);
      return;
    }
    
    const { error } = await supabase
      .from('event_participants')
      .insert({
        event_id: id,
        user_id: user.id,
        status: event.requires_approval ? 'pending' : 'approved'
      });
    
    if (!error) {
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫
      await supabase.rpc('increment_participants', { event_id: id });
      refetch();
    }
  };
  
  return (
    <ScrollView className="flex-1">
      {/* Header —Å –∫–∞—Ä—Ç–æ–π */}
      <View className="h-48">
        <MapView
          initialRegion={{
            latitude: event.location.coordinates[1],
            longitude: event.location.coordinates[0],
            latitudeDelta: 0.01,
            longitudeDelta: 0.01
          }}
        >
          <Marker coordinate={event.location.coordinates} />
        </MapView>
      </View>
      
      <View className="p-4">
        {/* –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏ —Å—Ç–∞—Ç—É—Å */}
        <View className="flex-row items-center mb-2">
          <CategoryBadge category={event.category} />
          {event.requires_approval && (
            <Badge variant="outline" className="ml-2">–ú–æ–¥–µ—Ä–∞—Ü–∏—è</Badge>
          )}
        </View>
        
        {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
        <Text className="text-2xl font-bold mb-2">{event.title}</Text>
        
        {/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}
        <View className="flex-row items-center mb-4">
          <Calendar size={20} className="text-gray-500 mr-2" />
          <Text className="text-gray-700">
            {format(new Date(event.starts_at), "EEEE, d MMMM '–≤' HH:mm", { locale: ru })}
          </Text>
        </View>
        
        {/* –ú–µ—Å—Ç–æ */}
        <Pressable 
          onPress={() => openMaps(event.location)}
          className="flex-row items-start mb-4"
        >
          <MapPin size={20} className="text-gray-500 mr-2 mt-0.5" />
          <View className="flex-1">
            <Text className="text-gray-700">{event.place_name || event.address}</Text>
            {event.place_details && (
              <Text className="text-gray-500 text-sm">{event.place_details}</Text>
            )}
          </View>
          <ExternalLink size={16} className="text-primary" />
        </Pressable>
        
        {/* –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä */}
        <Pressable 
          onPress={() => router.push(`/user/${event.organizer.id}`)}
          className="flex-row items-center p-3 bg-gray-50 rounded-xl mb-4"
        >
          <Avatar size={48} source={{ uri: event.organizer.avatar_url }} />
          <View className="ml-3 flex-1">
            <Text className="font-semibold">{event.organizer.display_name}</Text>
            <View className="flex-row items-center">
              <Star size={14} className="text-yellow-500" />
              <Text className="text-gray-600 ml-1">
                {event.organizer.rating.toFixed(1)} ¬∑ {event.organizer.events_organized} –≤—Å—Ç—Ä–µ—á
              </Text>
            </View>
          </View>
          <ChevronRight size={20} className="text-gray-400" />
        </Pressable>
        
        {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
        {event.description && (
          <View className="mb-4">
            <Text className="text-lg font-semibold mb-2">–û –≤—Å—Ç—Ä–µ—á–µ</Text>
            <Text className="text-gray-700">{event.description}</Text>
          </View>
        )}
        
        {/* –£—á–∞—Å—Ç–Ω–∏–∫–∏ */}
        <View className="mb-4">
          <View className="flex-row items-center justify-between mb-2">
            <Text className="text-lg font-semibold">
              –£—á–∞—Å—Ç–Ω–∏–∫–∏ ({event.current_participants}
              {event.max_participants && `/${event.max_participants}`})
            </Text>
          </View>
          <ParticipantsList 
            participants={event.participants} 
            maxVisible={5}
          />
        </View>
        
        {/* –ß–∞—Ç */}
        {(isOrganizer || isParticipant) && event.allow_chat && (
          <Pressable 
            onPress={() => router.push(`/event/${id}/chat`)}
            className="flex-row items-center justify-between p-4 bg-primary/10 rounded-xl mb-4"
          >
            <View className="flex-row items-center">
              <MessageCircle size={24} className="text-primary mr-3" />
              <Text className="font-semibold text-primary">–ß–∞—Ç –≤—Å—Ç—Ä–µ—á–∏</Text>
            </View>
            <ChevronRight size={20} className="text-primary" />
          </Pressable>
        )}
      </View>
      
      {/* Bottom action */}
      <View className="p-4 border-t border-gray-100">
        {canJoin && (
          <Button onPress={handleJoin} size="lg" className="w-full">
            {subscriptionType === 'free' ? '–ó–∞–ø–∏—Å–∞—Ç—å—Å—è (99‚ÇΩ)' : '–ó–∞–ø–∏—Å–∞—Ç—å—Å—è'}
          </Button>
        )}
        {isParticipant && (
          <Button variant="outline" onPress={handleCancel} size="lg" className="w-full">
            –û—Ç–º–µ–Ω–∏—Ç—å —É—á–∞—Å—Ç–∏–µ
          </Button>
        )}
        {isOrganizer && (
          <Button onPress={() => router.push(`/event/${id}/manage`)} size="lg" className="w-full">
            –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–µ–π
          </Button>
        )}
      </View>
    </ScrollView>
  );
}
```

#### –î–µ–Ω—å 6-7: –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

### –ù–µ–¥–µ–ª—è 4: –ö–∞—Ä—Ç–∞ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è

#### –î–µ–Ω—å 1-3: Yandex Maps –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```typescript
// components/discovery/MapView.tsx
import YaMap, { Marker, Clusterer } from 'react-native-yamap';

YaMap.init('YOUR_YANDEX_API_KEY');

interface EventMapProps {
  events: Event[];
  userLocation: LatLng;
  onEventPress: (eventId: string) => void;
}

export function EventMap({ events, userLocation, onEventPress }: EventMapProps) {
  const mapRef = useRef<YaMap>(null);
  
  return (
    <YaMap
      ref={mapRef}
      style={{ flex: 1 }}
      initialRegion={{
        lat: userLocation.latitude,
        lon: userLocation.longitude,
        zoom: 12
      }}
      showUserPosition
    >
      <Clusterer
        clusterColor="#6366F1"
        onClusterPress={(cluster) => {
          mapRef.current?.fitAllMarkers();
        }}
      >
        {events.map(event => (
          <Marker
            key={event.id}
            point={{
              lat: event.location.coordinates[1],
              lon: event.location.coordinates[0]
            }}
            onPress={() => onEventPress(event.id)}
          >
            <View className="bg-white rounded-full p-2 shadow-lg">
              <Text>{event.category.icon}</Text>
            </View>
          </Marker>
        ))}
      </Clusterer>
    </YaMap>
  );
}
```

#### –î–µ–Ω—å 4-5: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–∞/—Å–ø–∏—Å–æ–∫

```typescript
// app/(tabs)/index.tsx
export default function DiscoveryScreen() {
  const [viewMode, setViewMode] = useState<'list' | 'map'>('list');
  const { events, filters, setFilters, fetchEvents, isLoading } = useEventsStore();
  const { location } = useLocation();
  
  useEffect(() => {
    if (location) {
      fetchEvents();
    }
  }, [location, filters]);
  
  return (
    <View className="flex-1">
      {/* Header —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ */}
      <View className="p-4 bg-white border-b border-gray-100">
        <SearchBar 
          placeholder="–ü–æ–∏—Å–∫ –≤—Å—Ç—Ä–µ—á..."
          onSearch={(query) => setFilters({ search: query })}
        />
        <ScrollView horizontal showsHorizontalScrollIndicator={false} className="mt-3">
          <FilterChip
            label="–ö–∞—Ç–µ–≥–æ—Ä–∏—è"
            value={filters.category}
            onPress={() => openCategoryFilter()}
          />
          <FilterChip
            label="–î–∞—Ç–∞"
            value={filters.dateRange}
            onPress={() => openDateFilter()}
          />
          <FilterChip
            label={`${filters.maxDistance} –∫–º`}
            onPress={() => openDistanceFilter()}
          />
        </ScrollView>
      </View>
      
      {/* View mode toggle */}
      <View className="flex-row p-2 bg-gray-100">
        <Pressable
          onPress={() => setViewMode('list')}
          className={`flex-1 py-2 rounded-lg ${viewMode === 'list' ? 'bg-white' : ''}`}
        >
          <Text className="text-center">–°–ø–∏—Å–æ–∫</Text>
        </Pressable>
        <Pressable
          onPress={() => setViewMode('map')}
          className={`flex-1 py-2 rounded-lg ${viewMode === 'map' ? 'bg-white' : ''}`}
        >
          <Text className="text-center">–ö–∞—Ä—Ç–∞</Text>
        </Pressable>
      </View>
      
      {/* Content */}
      {viewMode === 'list' ? (
        <FlatList
          data={events}
          renderItem={({ item }) => (
            <EventCard 
              event={item} 
              distance={calculateDistance(location, item.location)}
            />
          )}
          keyExtractor={item => item.id}
          contentContainerClassName="p-4"
          refreshing={isLoading}
          onRefresh={fetchEvents}
          ListEmptyComponent={<EmptyState />}
        />
      ) : (
        <EventMap
          events={events}
          userLocation={location}
          onEventPress={(id) => router.push(`/event/${id}`)}
        />
      )}
    </View>
  );
}
```

#### –î–µ–Ω—å 6-7: –§–∏–ª—å—Ç—Ä—ã

---

### –ù–µ–¥–µ–ª—è 5: Realtime —á–∞—Ç

#### –î–µ–Ω—å 1-3: –ß–∞—Ç –≤—Å—Ç—Ä–µ—á–∏

```typescript
// app/event/[id]/chat.tsx
export default function EventChatScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const { user } = useAuth();
  const [messages, setMessages] = useState<Message[]>([]);
  const [newMessage, setNewMessage] = useState('');
  
  // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
  useEffect(() => {
    const fetchMessages = async () => {
      const { data } = await supabase
        .from('event_messages')
        .select(`
          *,
          user:profiles(id, display_name, avatar_url)
        `)
        .eq('event_id', id)
        .order('created_at', { ascending: true });
      
      setMessages(data || []);
    };
    
    fetchMessages();
  }, [id]);
  
  // Realtime –ø–æ–¥–ø–∏—Å–∫–∞
  useEffect(() => {
    const channel = supabase
      .channel(`event-chat-${id}`)
      .on(
        'postgres_changes',
        {
          event: 'INSERT',
          schema: 'public',
          table: 'event_messages',
          filter: `event_id=eq.${id}`
        },
        async (payload) => {
          // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º
          const { data } = await supabase
            .from('event_messages')
            .select(`*, user:profiles(id, display_name, avatar_url)`)
            .eq('id', payload.new.id)
            .single();
          
          if (data) {
            setMessages(prev => [...prev, data]);
          }
        }
      )
      .subscribe();
    
    return () => {
      supabase.removeChannel(channel);
    };
  }, [id]);
  
  const sendMessage = async () => {
    if (!newMessage.trim()) return;
    
    await supabase.from('event_messages').insert({
      event_id: id,
      user_id: user.id,
      content: newMessage.trim()
    });
    
    setNewMessage('');
  };
  
  return (
    <KeyboardAvoidingView className="flex-1" behavior="padding">
      <FlatList
        data={messages}
        renderItem={({ item }) => (
          <MessageBubble 
            message={item} 
            isOwn={item.user_id === user.id}
          />
        )}
        keyExtractor={item => item.id}
        contentContainerClassName="p-4"
        inverted={false}
      />
      
      <View className="flex-row items-center p-4 border-t border-gray-100">
        <TextInput
          value={newMessage}
          onChangeText={setNewMessage}
          placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..."
          className="flex-1 bg-gray-100 rounded-full px-4 py-2 mr-2"
          multiline
          maxLength={500}
        />
        <Pressable 
          onPress={sendMessage}
          disabled={!newMessage.trim()}
          className="w-10 h-10 bg-primary rounded-full items-center justify-center"
        >
          <Send size={20} className="text-white" />
        </Pressable>
      </View>
    </KeyboardAvoidingView>
  );
}
```

#### –î–µ–Ω—å 4-5: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```typescript
// services/notifications/setup.ts
import * as Notifications from 'expo-notifications';

export async function setupNotifications() {
  const { status } = await Notifications.requestPermissionsAsync();
  
  if (status !== 'granted') {
    return null;
  }
  
  const token = await Notifications.getExpoPushTokenAsync();
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª—å
  await supabase
    .from('profiles')
    .update({ push_token: token.data })
    .eq('id', user.id);
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
  Notifications.setNotificationHandler({
    handleNotification: async () => ({
      shouldShowAlert: true,
      shouldPlaySound: true,
      shouldSetBadge: true,
    }),
  });
  
  return token;
}

// supabase/functions/send-notification/index.ts
// Webhook –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ push –ø—Ä–∏ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
Deno.serve(async (req) => {
  const { record, type } = await req.json();
  
  if (type === 'INSERT' && record.table === 'event_messages') {
    // –ü–æ–ª—É—á–∞–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏—è
    const { data: participants } = await supabase
      .from('event_participants')
      .select('user_id, profiles(push_token)')
      .eq('event_id', record.event_id)
      .neq('user_id', record.user_id); // –∏—Å–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Ä–∞
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º push —á–µ—Ä–µ–∑ Expo
    const pushTokens = participants
      .map(p => p.profiles?.push_token)
      .filter(Boolean);
    
    await fetch('https://exp.host/--/api/v2/push/send', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(
        pushTokens.map(token => ({
          to: token,
          title: '–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
          body: record.content.substring(0, 100),
          data: { eventId: record.event_id }
        }))
      )
    });
  }
  
  return new Response('OK');
});
```

#### –î–µ–Ω—å 6-7: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤—Å—Ç—Ä–µ—á–∞—Ö

---

### –ù–µ–¥–µ–ª—è 6: –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

#### –î–µ–Ω—å 1-3: YooKassa –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```typescript
// supabase/functions/create-payment/index.ts
const PRICES = {
  participant_monthly: 199,
  organizer_monthly: 499,
  single_event: 99
};

Deno.serve(async (req) => {
  const { type, userId, eventId } = await req.json();
  
  const amount = PRICES[type];
  const description = type === 'single_event' 
    ? '–†–∞–∑–æ–≤–æ–µ —É—á–∞—Å—Ç–∏–µ –≤–æ –≤—Å—Ç—Ä–µ—á–µ'
    : type === 'organizer_monthly'
      ? '–ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ (1 –º–µ—Å—è—Ü)'
      : '–ü–æ–¥–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (1 –º–µ—Å—è—Ü)';
  
  // –°–æ–∑–¥–∞—ë–º –ø–ª–∞—Ç—ë–∂ –≤ YooKassa
  const response = await fetch('https://api.yookassa.ru/v3/payments', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Basic ${btoa(SHOP_ID + ':' + SECRET_KEY)}`,
      'Idempotence-Key': crypto.randomUUID()
    },
    body: JSON.stringify({
      amount: { value: amount.toFixed(2), currency: 'RUB' },
      confirmation: {
        type: 'redirect',
        return_url: `https://yourapp.com/payment/callback?type=${type}&userId=${userId}&eventId=${eventId || ''}`
      },
      capture: true,
      description,
      metadata: { type, userId, eventId }
    })
  });
  
  const payment = await response.json();
  
  return new Response(JSON.stringify({
    paymentId: payment.id,
    confirmationUrl: payment.confirmation.confirmation_url
  }));
});

// Webhook –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
Deno.serve(async (req) => {
  const { event, object } = await req.json();
  
  if (event === 'payment.succeeded') {
    const { type, userId, eventId } = object.metadata;
    
    if (type === 'single_event') {
      // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º —É—á–∞—Å—Ç–∏–µ
      await supabase
        .from('event_participants')
        .update({ payment_status: 'paid', status: 'approved' })
        .eq('event_id', eventId)
        .eq('user_id', userId);
    } else {
      // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å–∫—É
      const expiresAt = new Date();
      expiresAt.setMonth(expiresAt.getMonth() + 1);
      
      await supabase.from('app_subscriptions').insert({
        user_id: userId,
        type: type.replace('_monthly', ''),
        starts_at: new Date().toISOString(),
        expires_at: expiresAt.toISOString(),
        payment_id: object.id,
        amount: object.amount.value
      });
      
      await supabase
        .from('profiles')
        .update({
          subscription_type: type.replace('_monthly', ''),
          subscription_expires_at: expiresAt.toISOString()
        })
        .eq('id', userId);
    }
  }
  
  return new Response('OK');
});
```

#### –î–µ–Ω—å 4-5: Paywall UI

```typescript
// app/subscription.tsx
export default function SubscriptionScreen() {
  const { subscriptionType } = useSubscription();
  const [selectedPlan, setSelectedPlan] = useState<'participant' | 'organizer'>('participant');
  const [isLoading, setIsLoading] = useState(false);
  
  const handleSubscribe = async () => {
    setIsLoading(true);
    
    const { data } = await supabase.functions.invoke('create-payment', {
      body: {
        type: `${selectedPlan}_monthly`,
        userId: user.id
      }
    });
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
    await WebBrowser.openBrowserAsync(data.confirmationUrl);
    setIsLoading(false);
  };
  
  return (
    <ScrollView className="flex-1 bg-white">
      <View className="p-6">
        <Text className="text-3xl font-bold text-center mb-2">
          –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø–ª–∞–Ω
        </Text>
        <Text className="text-gray-500 text-center mb-8">
          –ü–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—è —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π
        </Text>
        
        {/* Plan cards */}
        <View className="gap-4 mb-8">
          {/* –£—á–∞—Å—Ç–Ω–∏–∫ */}
          <Pressable
            onPress={() => setSelectedPlan('participant')}
            className={`p-4 rounded-2xl border-2 ${
              selectedPlan === 'participant' 
                ? 'border-primary bg-primary/5' 
                : 'border-gray-200'
            }`}
          >
            <View className="flex-row items-center justify-between mb-2">
              <Text className="text-xl font-bold">–£—á–∞—Å—Ç–Ω–∏–∫</Text>
              <Text className="text-2xl font-bold">199‚ÇΩ<Text className="text-base font-normal text-gray-500">/–º–µ—Å</Text></Text>
            </View>
            <View className="gap-2">
              <FeatureItem icon="‚úì" text="–ó–∞–ø–∏—Å—å –Ω–∞ –ª—é–±—ã–µ –≤—Å—Ç—Ä–µ—á–∏" />
              <FeatureItem icon="‚úì" text="–ß–∞—Ç —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏" />
              <FeatureItem icon="‚úì" text="–û—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã" />
              <FeatureItem icon="‚úì" text="–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å" />
            </View>
          </Pressable>
          
          {/* –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä */}
          <Pressable
            onPress={() => setSelectedPlan('organizer')}
            className={`p-4 rounded-2xl border-2 ${
              selectedPlan === 'organizer' 
                ? 'border-primary bg-primary/5' 
                : 'border-gray-200'
            }`}
          >
            <View className="absolute -top-3 right-4 bg-orange-500 px-3 py-1 rounded-full">
              <Text className="text-white text-xs font-bold">–ü–û–ü–£–õ–Ø–†–ù–´–ô</Text>
            </View>
            <View className="flex-row items-center justify-between mb-2">
              <Text className="text-xl font-bold">–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä</Text>
              <Text className="text-2xl font-bold">499‚ÇΩ<Text className="text-base font-normal text-gray-500">/–º–µ—Å</Text></Text>
            </View>
            <View className="gap-2">
              <FeatureItem icon="‚úì" text="–í—Å—ë –∏–∑ –ø–ª–∞–Ω–∞ –£—á–∞—Å—Ç–Ω–∏–∫" />
              <FeatureItem icon="‚úì" text="–°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á" />
              <FeatureItem icon="‚úì" text="–ú–æ–¥–µ—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤" />
              <FeatureItem icon="‚úì" text="–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤—Å—Ç—Ä–µ—á" />
              <FeatureItem icon="‚úì" text="–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–∏—Å–∫–µ" />
            </View>
          </Pressable>
        </View>
        
        {/* –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ */}
        <View className="p-4 bg-gray-50 rounded-xl mb-8">
          <Text className="font-semibold mb-1">–ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏?</Text>
          <Text className="text-gray-600">
            –ú–æ–∂–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤–æ –≤—Å—Ç—Ä–µ—á–∞—Ö –∑–∞ 99‚ÇΩ –∑–∞ –∫–∞–∂–¥—É—é
          </Text>
        </View>
        
        <Button 
          onPress={handleSubscribe} 
          isLoading={isLoading}
          size="lg"
          className="w-full"
        >
          –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –∑–∞ {selectedPlan === 'participant' ? '199' : '499'}‚ÇΩ/–º–µ—Å
        </Button>
        
        <Text className="text-gray-400 text-center text-sm mt-4">
          –û—Ç–º–µ–Ω–∏—Ç—å –º–æ–∂–Ω–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç. –í–æ–∑–≤—Ä–∞—Ç –∑–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
        </Text>
      </View>
    </ScrollView>
  );
}
```

#### –î–µ–Ω—å 6-7: Premium gating

---

### –ù–µ–¥–µ–ª—è 7: Trust & Safety

#### –î–µ–Ω—å 1-2: –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è

```typescript
// app/event/[id]/manage.tsx (–¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞)
export default function ManageEventScreen() {
  const { id } = useLocalSearchParams();
  const [participants, setParticipants] = useState<Participant[]>([]);
  
  const markAttendance = async (participantId: string, attended: boolean) => {
    await supabase
      .from('event_participants')
      .update({ 
        status: attended ? 'attended' : 'no_show' 
      })
      .eq('id', participantId);
    
    if (!attended) {
      // –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç no-show —Å—á—ë—Ç—á–∏–∫–∞
      await supabase.rpc('increment_no_show', { 
        p_user_id: participant.user_id 
      });
    }
    
    refetch();
  };
  
  return (
    <View className="flex-1 p-4">
      <Text className="text-xl font-bold mb-4">–û—Ç–º–µ—Ç–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è</Text>
      
      {participants.map(p => (
        <View 
          key={p.id}
          className="flex-row items-center justify-between p-3 bg-white rounded-xl mb-2"
        >
          <View className="flex-row items-center">
            <Avatar source={{ uri: p.user.avatar_url }} size={40} />
            <Text className="ml-3 font-medium">{p.user.display_name}</Text>
          </View>
          
          {p.status === 'approved' ? (
            <View className="flex-row gap-2">
              <IconButton
                icon="check"
                mode="contained"
                containerColor="#10B981"
                onPress={() => markAttendance(p.id, true)}
              />
              <IconButton
                icon="close"
                mode="contained"
                containerColor="#EF4444"
                onPress={() => markAttendance(p.id, false)}
              />
            </View>
          ) : (
            <Badge 
              variant={p.status === 'attended' ? 'success' : 'destructive'}
            >
              {p.status === 'attended' ? '–ë—ã–ª' : '–ù–µ –ø—Ä–∏—à—ë–ª'}
            </Badge>
          )}
        </View>
      ))}
    </View>
  );
}
```

#### –î–µ–Ω—å 3-4: No-show —Å–∏—Å—Ç–µ–º–∞

```typescript
// supabase/functions/process-no-shows/index.ts
// Cron job: –∫–∞–∂–¥—ã–π —á–∞—Å
Deno.serve(async () => {
  const twoHoursAgo = new Date();
  twoHoursAgo.setHours(twoHoursAgo.getHours() - 2);
  
  // –ù–∞—Ö–æ–¥–∏–º –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –æ—Ç–º–µ—Ç–∫–∏
  const { data: events } = await supabase
    .from('events')
    .select('id')
    .eq('status', 'published')
    .lt('starts_at', twoHoursAgo.toISOString());
  
  for (const event of events || []) {
    // –ü–æ–º–µ—á–∞–µ–º –Ω–µ–æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö –∫–∞–∫ no-show
    await supabase
      .from('event_participants')
      .update({ status: 'no_show' })
      .eq('event_id', event.id)
      .eq('status', 'approved');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è
    await supabase
      .from('events')
      .update({ status: 'completed' })
      .eq('id', event.id);
  }
  
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±–∞–Ω—ã
  const { data: offenders } = await supabase
    .from('profiles')
    .select('id, no_show_count')
    .gte('no_show_count', 2);
  
  for (const user of offenders || []) {
    const banDays = user.no_show_count === 2 ? 7 : 30;
    
    await supabase
      .from('profiles')
      .update({ 
        banned_until: new Date(Date.now() + banDays * 24 * 60 * 60 * 1000).toISOString()
      })
      .eq('id', user.id);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await sendPushNotification(user.id, {
      title: '–í—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞',
      body: `–í—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ ${banDays} –¥–Ω–µ–π –∏–∑-–∑–∞ –Ω–µ—è–≤–æ–∫ –Ω–∞ –≤—Å—Ç—Ä–µ—á–∏`
    });
  }
  
  return new Response('OK');
});
```

#### –î–µ–Ω—å 5-7: –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã

```typescript
// components/events/ReviewForm.tsx
export function ReviewForm({ eventId, revieweeId, type }: ReviewFormProps) {
  const [rating, setRating] = useState(5);
  const [comment, setComment] = useState('');
  
  const submitReview = async () => {
    await supabase.from('reviews').insert({
      event_id: eventId,
      reviewer_id: user.id,
      reviewee_id: revieweeId,
      rating,
      comment,
      review_type: type
    });
    
    // –ü–µ—Ä–µ—Å—á—ë—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞
    await supabase.rpc('recalculate_rating', { p_user_id: revieweeId });
    
    router.back();
  };
  
  return (
    <View className="p-4">
      <Text className="text-lg font-semibold mb-4">–û—Ü–µ–Ω–∏—Ç–µ –≤—Å—Ç—Ä–µ—á—É</Text>
      
      <View className="flex-row justify-center mb-6">
        {[1, 2, 3, 4, 5].map(star => (
          <Pressable key={star} onPress={() => setRating(star)}>
            <Star
              size={40}
              fill={star <= rating ? '#F59E0B' : 'transparent'}
              color={star <= rating ? '#F59E0B' : '#D1D5DB'}
            />
          </Pressable>
        ))}
      </View>
      
      <TextInput
        value={comment}
        onChangeText={setComment}
        placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
        multiline
        numberOfLines={4}
        className="bg-gray-100 rounded-xl p-4 mb-4"
      />
      
      <Button onPress={submitReview}>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</Button>
    </View>
  );
}
```

---

### –ù–µ–¥–µ–ª—è 8: Polish –∏ –∑–∞–ø—É—Å–∫

#### –î–µ–Ω—å 1-3: UI/UX polish

- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- Skeleton loaders
- Error boundaries
- Haptic feedback

#### –î–µ–Ω—å 4-5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- E2E —Ç–µ—Å—Ç—ã —Å Detox
- Manual testing
- Performance profiling

#### –î–µ–Ω—å 6-7: –ü—É–±–ª–∏–∫–∞—Ü–∏—è

- App Store assets
- Google Play submission
- Landing page
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      React Native App                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇDiscovery ‚îÇ  ‚îÇMy Events ‚îÇ  ‚îÇ  Chats   ‚îÇ  ‚îÇ Profile  ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ  (Map)   ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ       ‚îÇ             ‚îÇ             ‚îÇ             ‚îÇ                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ                  Zustand Stores                    ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ   (events, auth, location, chat, subscription)     ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ       ‚îÇ                                          ‚îÇ               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇYandex   ‚îÇ  ‚îÇLocation ‚îÇ                  ‚îÇSupabase ‚îÇ          ‚îÇ
‚îÇ  ‚îÇMaps SDK ‚îÇ  ‚îÇService  ‚îÇ                  ‚îÇClient   ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                 ‚îÇ
                                                 ‚ñº
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ      Supabase         ‚îÇ
                                    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
                                    ‚îÇ  ‚îÇ   PostgreSQL    ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îÇ   + PostGIS     ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ
                                    ‚îÇ  ‚îÇ    Realtime     ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îÇ   (Chat, Sync)  ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ
                                    ‚îÇ  ‚îÇ Edge Functions  ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îÇ - search-events ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îÇ - join-event    ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îÇ - payments      ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îÇ - no-shows      ‚îÇ  ‚îÇ
                                    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                ‚îÇ
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ      YooKassa         ‚îÇ
                                    ‚îÇ   (Payments API)      ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 6. –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å

### –¢–∞—Ä–∏—Ñ—ã

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –§—É–Ω–∫—Ü–∏–∏ |
|-------|------|---------|
| Free | 0‚ÇΩ | –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å—Ç—Ä–µ—á, –ø—Ä–æ—Ñ–∏–ª—å |
| –£—á–∞—Å—Ç–Ω–∏–∫ | 199‚ÇΩ/–º–µ—Å | –ó–∞–ø–∏—Å—å –Ω–∞ –≤—Å—Ç—Ä–µ—á–∏, —á–∞—Ç, –æ—Ç–∑—ã–≤—ã, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è |
| –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä | 499‚ÇΩ/–º–µ—Å | –í—Å—ë –∏–∑ "–£—á–∞—Å—Ç–Ω–∏–∫" + —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á, –º–æ–¥–µ—Ä–∞—Ü–∏—è, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| –†–∞–∑–æ–≤–æ–µ —É—á–∞—Å—Ç–∏–µ | 99‚ÇΩ –∑–∞ –≤—Å—Ç—Ä–µ—á—É | –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏, –æ–ø–ª–∞—Ç–∞ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤—Å—Ç—Ä–µ—á—É |

### Unit Economics (–ø—Ä–æ–≥–Ω–æ–∑)

- CAC (Customer Acquisition Cost): ~200‚ÇΩ
- LTV (Lifetime Value): ~1500‚ÇΩ (—Å—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ 5 –º–µ—Å)
- LTV/CAC: 7.5x
- Gross Margin: ~80%

---

## 7. –ü—Ä–∞–≤–∏–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### No-show —Å–∏—Å—Ç–µ–º–∞

| No-show # | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ |
|-----------|-------------|
| 1 | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ |
| 2 | –ë–∞–Ω –Ω–∞ 7 –¥–Ω–µ–π |
| 3+ | –ë–∞–Ω –Ω–∞ 30 –¥–Ω–µ–π |

### –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: 1.0
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: 5.0
- –ü—Ä–∏ —Ä–µ–π—Ç–∏–Ω–≥–µ < 3.0 ‚Äî –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –≤ –ø–æ–∏—Å–∫–µ
- –ü—Ä–∏ —Ä–µ–π—Ç–∏–Ω–≥–µ < 2.0 ‚Äî —Ä—É—á–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

- –ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ AI
- –†—É—á–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∂–∞–ª–æ–±
- –ë–∞–Ω –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ—Å—Ç–≤–∞

---

## 8. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ MVP

| –ú–µ—Ç—Ä–∏–∫–∞ | Target (3 –º–µ—Å) |
|---------|----------------|
| MAU | 2,000+ |
| –°–æ–±—ã—Ç–∏—è/–Ω–µ–¥–µ–ª—è | 100+ |
| –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å—Ç—Ä–µ—á–∏ | 5+ —á–µ–ª–æ–≤–µ–∫ |
| No-show rate | <15% |
| Premium Conversion | >5% |
| NPS | >50 |

---

## 9. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ò–º–ø–∞–∫—Ç | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|--------|-----------|
| Cold start (–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) | –í—ã—Å–æ–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –ó–∞–ø—É—Å–∫ –≤ –æ–¥–Ω–æ–º –≥–æ—Ä–æ–¥–µ, seed-–∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç –∫–æ–º–∞–Ω–¥—ã |
| –í—ã—Å–æ–∫–∏–π no-show rate | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∏–π | –ü–ª–∞—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–∏—Å—Ç–µ–º–∞ —à—Ç—Ä–∞—Ñ–æ–≤ |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤—Å—Ç—Ä–µ—á | –ù–∏–∑–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ä–µ–π—Ç–∏–Ω–≥–∏, check-in —Å–∏—Å—Ç–µ–º–∞ |
| –ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è —Å Telegram | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–∏–π | –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ (–∫–∞—Ä—Ç–∞, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, no-show) |

---

## 10. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–ø—É—Å–∫–∞

### –≠—Ç–∞–ø 1: Soft Launch (1 –≥–æ—Ä–æ–¥)

1. –í—ã–±—Ä–∞—Ç—å –≥–æ—Ä–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ú–æ—Å–∫–≤–∞ –∏–ª–∏ –°–ü–±)
2. –°–æ–∑–¥–∞—Ç—å 20-30 seed-—Å–æ–±—ã—Ç–∏–π –æ—Ç –∫–æ–º–∞–Ω–¥—ã
3. –ü—Ä–∏–≤–ª–µ—á—å 200-500 early adopters
4. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å

### –≠—Ç–∞–ø 2: –í–∞–ª–∏–¥–∞—Ü–∏—è

1. –î–æ—Å—Ç–∏—á—å 50+ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –≤ –Ω–µ–¥–µ–ª—é
2. No-show rate < 20%
3. NPS > 40

### –≠—Ç–∞–ø 3: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å–∫ –≤ 5 –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö
2. –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
3. –ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–∞ —Å –ø–ª–æ—â–∞–¥–∫–∞–º–∏

---

## 11. Roadmap –ø–æ—Å–ª–µ MVP

### Q2 2025
- iOS –≤–µ—Ä—Å–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –ø–æ —Å—Å—ã–ª–∫–µ

### Q3 2025
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ)
- –ì—Ä—É–ø–ø—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –≥–æ—Å—É—Å–ª—É–≥–∏

### Q4 2025
- Marketplace –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤
- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- API –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤

---

## 12. –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Supabase Docs](https://supabase.com/docs)
- [Expo Docs](https://docs.expo.dev)
- [Yandex Maps SDK](https://yandex.ru/dev/maps/)
- [YooKassa API](https://yookassa.ru/developers)

### –ü–æ–ª–µ–∑–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `react-native-yamap` ‚Äî Yandex Maps –¥–ª—è RN
- `date-fns` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- `zod` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `react-native-paper` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: –î–µ–∫–∞–±—Ä—å 2024*
*–í–µ—Ä—Å–∏—è: 1.0*
